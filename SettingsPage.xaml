<UserControl x:Class="MooseTracks.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:MooseTracks"
             Background="{DynamicResource AppBackground}"
             Height="700" Width="922">
    <UserControl.Resources>
        <local:ColorConverter x:Key="ColorConverter"/>
    </UserControl.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- FFmpeg Path Settings -->
        <GroupBox Header="FFmpeg Configuration" Foreground="{DynamicResource AppForeground}" 
                  Background="{DynamicResource AppBackground}" BorderBrush="{DynamicResource AppBorderBrush}" 
                  BorderThickness="1" Grid.Row="0">
            <StackPanel Margin="5">
                <DockPanel Margin="0,0,0,5">
                    <TextBlock Text="FFmpeg Path:" Width="100" VerticalAlignment="Center" Foreground="{DynamicResource AppForeground}"/>
                    <TextBox x:Name="FFmpegPathTextBox" Width="400" Height="22" 
                             Background="{DynamicResource AppBackground}" Foreground="{DynamicResource AppForeground}" 
                             BorderBrush="{DynamicResource AppBorderBrush}"/>
                    <Button x:Name="BrowseFFmpegButton" Content="Browse" Width="80" Margin="5,0,0,0" Click="BrowseFFmpegButton_Click"/>
                </DockPanel>
                <Button x:Name="SaveFFmpegButton" Content="Save FFmpeg Path" Width="120" HorizontalAlignment="Right" 
                        Margin="0,10,0,0" Click="SaveFFmpegButton_Click"/>
            </StackPanel>
        </GroupBox>
        <!-- Theme Settings -->
        <GroupBox Header="Theme Configuration" Foreground="{DynamicResource AppForeground}" 
                  Background="{DynamicResource AppBackground}" BorderBrush="{DynamicResource AppBorderBrush}" 
                  BorderThickness="1" Grid.Row="1" Margin="0,10,0,0">
            <StackPanel Margin="5">
                <!-- Theme pick + default action -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Theme:" Width="100" VerticalAlignment="Center"
               Foreground="{DynamicResource AppForeground}"/>
                    <ComboBox x:Name="ThemeComboBox" Width="200"
              SelectionChanged="ThemeComboBox_SelectionChanged"/>
                    <Button x:Name="SaveDefaultThemeButton" Content="Set as Default"
            Width="110" Margin="8,0,0,0"
            Click="SaveDefaultThemeButton_Click"/>
                </DockPanel>


                <!-- Background Color -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Background:" Width="100" VerticalAlignment="Top" Foreground="{DynamicResource AppForeground}"/>
                    <StackPanel Width="200">
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="R:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BackgroundRSlider" Minimum="0" Maximum="255" Value="0" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="G:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BackgroundGSlider" Minimum="0" Maximum="255" Value="0" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="B:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BackgroundBSlider" Minimum="0" Maximum="255" Value="0" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <Rectangle x:Name="BackgroundPreview" Height="20" Margin="0,5,0,0">
                            <Rectangle.Fill>
                                <MultiBinding Converter="{StaticResource ColorConverter}">
                                    <Binding ElementName="BackgroundRSlider" Path="Value"/>
                                    <Binding ElementName="BackgroundGSlider" Path="Value"/>
                                    <Binding ElementName="BackgroundBSlider" Path="Value"/>
                                </MultiBinding>
                            </Rectangle.Fill>
                        </Rectangle>
                    </StackPanel>
                </DockPanel>
                <!-- Foreground Color -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Foreground:" Width="100" VerticalAlignment="Top" Foreground="{DynamicResource AppForeground}"/>
                    <StackPanel Width="200">
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="R:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="ForegroundRSlider" Minimum="0" Maximum="255" Value="255" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="G:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="ForegroundGSlider" Minimum="0" Maximum="255" Value="255" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="B:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="ForegroundBSlider" Minimum="0" Maximum="255" Value="255" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <Rectangle x:Name="ForegroundPreview" Height="20" Margin="0,5,0,0">
                            <Rectangle.Fill>
                                <MultiBinding Converter="{StaticResource ColorConverter}">
                                    <Binding ElementName="ForegroundRSlider" Path="Value"/>
                                    <Binding ElementName="ForegroundGSlider" Path="Value"/>
                                    <Binding ElementName="ForegroundBSlider" Path="Value"/>
                                </MultiBinding>
                            </Rectangle.Fill>
                        </Rectangle>
                    </StackPanel>
                </DockPanel>
                <!-- Border Color -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Border:" Width="100" VerticalAlignment="Top" Foreground="{DynamicResource AppForeground}"/>
                    <StackPanel Width="200">
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="R:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BorderRSlider" Minimum="0" Maximum="255" Value="255" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="G:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BorderGSlider" Minimum="0" Maximum="255" Value="165" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <DockPanel Margin="0,0,0,2">
                            <TextBlock Text="B:" Width="20" Foreground="{DynamicResource AppForeground}"/>
                            <Slider x:Name="BorderBSlider" Minimum="0" Maximum="255" Value="0" ValueChanged="ColorSlider_ValueChanged"/>
                        </DockPanel>
                        <Rectangle x:Name="BorderPreview" Height="20" Margin="0,5,0,0">
                            <Rectangle.Fill>
                                <MultiBinding Converter="{StaticResource ColorConverter}">
                                    <Binding ElementName="BorderRSlider" Path="Value"/>
                                    <Binding ElementName="BorderGSlider" Path="Value"/>
                                    <Binding ElementName="BorderBSlider" Path="Value"/>
                                </MultiBinding>
                            </Rectangle.Fill>
                        </Rectangle>
                    </StackPanel>
                </DockPanel>
                <!-- Save Theme -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Theme Name:" Width="100" VerticalAlignment="Center" Foreground="{DynamicResource AppForeground}"/>
                    <TextBox x:Name="ThemeNameTextBox" Width="200" Height="22" 
                             Background="{DynamicResource AppBackground}" Foreground="{DynamicResource AppForeground}" 
                             BorderBrush="{DynamicResource AppBorderBrush}"/>
                    <Button x:Name="SaveThemeButton" Content="Save Theme" Width="100" Margin="5,0,0,0" Click="SaveThemeButton_Click"/>
                </DockPanel>
                <Button x:Name="ApplyThemeButton" Content="Apply Theme" Width="100" HorizontalAlignment="Right" 
                        Margin="0,10,0,0" Click="ApplyThemeButton_Click"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</UserControl>